(declare-rel fail ())
(declare-rel foo (Bool Bool (Array Int Int) (Array Int Int) Int Int (Array Int Int) (Array Int Int) Int Int))
(declare-rel bar (Bool Bool Int Int))
(declare-rel main (Bool Bool (Array Int Int) (Array Int Int) Int Int (Array Int Int) (Array Int Int)))
(declare-var p1 Bool)
(declare-var t1 Bool)
(declare-var f1 Bool)
(declare-var b1 Int)
(declare-var secret1 Int)
(declare-var res1 Int)
(declare-var global1 (Array Int Int))
(declare-var global1_i (Array Int Int))
(declare-var global1_ii (Array Int Int))
(declare-var global1_iii (Array Int Int))
(declare-var global1_iiii (Array Int Int))
(declare-var p2 Bool)
(declare-var t2 Bool)
(declare-var f2 Bool)
(declare-var b2 Int)
(declare-var secret2 Int)
(declare-var res2 Int)
(declare-var global2 (Array Int Int))
(declare-var global2_i (Array Int Int))
(declare-var global2_ii (Array Int Int))
(declare-var global2_iii (Array Int Int))
(declare-var global2_iiii (Array Int Int))

(rule (=> (and
  (=> p1 (= b1 (select global1 0)))
  (=> p2 (= b2 (select global2 0)))
  (= t1 (and p1 (= secret1 0)))
  (= t2 (and p2 (= secret2 0)))
  (= f1 (and p1 (not (= secret1 0))))
  (= f2 (and p2 (not (= secret2 0))))
  (=> t1 (= res1 (+ b1 secret1)))
  (=> t2 (= res2 (+ b2 secret2)))
  (=> f1 (= res1 b1))
  (=> f2 (= res2 b2)))
  (foo p1 p2 global1 global2 secret1 secret2 global1 global2 res1 res2)))

(rule (bar p1 p2 secret1 secret2))

(rule (=> (and
  (=> p1 (= global1_i (store global1 0 42)))
  (=> p2 (= global2_i (store global2 0 42)))
  (or p1 p2)
  (bar p1 p2 secret1 secret2)
  (foo p1 p2 global1_i global2_i secret1 secret2 global1_ii global2_ii b1 b2)
  (=> p1 (= global1_iii (store global1_ii 1 b1)))
  (=> p2 (= global2_iii (store global2_ii 1 b2))))
  (main p1 p2 global1 global2 secret1 secret2 global1_iii global2_iii)))

(rule (=> (and
  (=> p1 (= global1_i (store global1 0 42)))
  (=> p2 (= global2_i (store global2 0 42)))
  (not (or p1 p2))
  (=> p1 (= global1_iii (store global1_ii 1 b1)))
  (=> p2 (= global2_iii (store global2_ii 1 b2))))
  (main p1 p2 global1 global2 secret1 secret2 global1_iii global2_iii)))

(rule (=> (and
  (=> (and p1 p2) (= (select global1 1) (select global2 1)))
  (main p1 p2 global1 global2 secret1 secret2 global1_i global2_i)
  (not (=> (and p1 p2) (= (select global1_i 1) (select global2_i 1)))))
 ; (not (=> (and p1 p2) (= global1_i global2_i))))
  fail))

(query fail)
